<div class="flex flex-col h-full bg-white/5 backdrop-blur-xl rounded-3xl overflow-hidden transition-all duration-300 border border-white/10 shadow-lg hover:shadow-2xl hover:-translate-y-1 hover:border-blue-600 hover:bg-white/10"
    [class.opacity-60]="product.stock <= 0" [class.grayscale]="product.stock <= 0">
    <!-- Image -->
    <div
        class="relative w-full aspect-[4/3] overflow-hidden bg-gradient-to-b from-slate-900 via-slate-900/80 to-slate-950 ring-1 ring-white/5">
        <img *ngIf="product.imageUrl && !imageError" [src]="product.imageUrl" [alt]="product.name"
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-300 hover:scale-105"
            (error)="onImageError($event)">
        <div *ngIf="!product.imageUrl || imageError"
            class="absolute inset-0 flex items-center justify-center text-slate-400">
            <div class="flex flex-col items-center gap-2 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="3" ry="3" />
                    <circle cx="9" cy="9" r="1.7" />
                    <path d="m21 15-5-5-11 11" />
                </svg>
                <span class="text-xs text-slate-400/80">Sin imagen disponible</span>
            </div>
        </div>
        <div
            class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300">
        </div>

        <!-- Stock Badge -->
        <div class="absolute top-3 left-3">
            <span *ngIf="product.stock >= 1"
                class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-emerald-400 bg-emerald-950/90 backdrop-blur-md rounded-full border border-emerald-400/30">
                ✓ Disponible
            </span>
            <span *ngIf="product.stock <= 0"
                class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-red-400 bg-red-950/90 backdrop-blur-md rounded-full border border-red-400/30">
                ✗ No Disponible
            </span>
        </div>

        <!-- Quick Action Button -->
        <div class="absolute bottom-3 right-3 opacity-0 hover:opacity-100 transition-opacity duration-300">
            <button (click)="addToCart($event)"
                class="flex items-center justify-center w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:scale-110"
                [disabled]="product.stock <= 0" title="Añadir al carrito">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="8" cy="21" r="1" />
                    <circle cx="19" cy="21" r="1" />
                    <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                    <path d="M12 10v6" />
                    <path d="M9 13h6" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Content -->
    <div class="flex flex-col flex-1 p-5">
        <h3 class="text-lg font-bold text-white mb-2 line-clamp-2 hover:text-cyan-400 transition-colors">
            <a [routerLink]="['/products', product.id]">
                {{ product.name }}
            </a>
        </h3>
        <p class="text-sm text-white/60 mb-4 line-clamp-2 flex-1">{{ product.description }}</p>

        <div class="flex flex-col mt-auto pt-4 border-t border-white/10 gap-3">
            <div class="flex items-center justify-between">
                <div class="flex flex-col">
                    <span class="text-xs text-white/50 uppercase tracking-wide">Precio</span>
                    <span
                        class="text-2xl font-bold bg-linear-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">
                        {{ product.price | priceFormat }}
                    </span>
                </div>
            </div>

            <!-- Botones de acción -->
            <div class="flex gap-2">
                <button (click)="addToCart($event)"
                    class="flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-semibold rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg"
                    [disabled]="product.stock <= 0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="8" cy="21" r="1" />
                        <circle cx="19" cy="21" r="1" />
                        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
                    </svg>
                    <span *ngIf="product.stock > 0">Añadir</span>
                    <span *ngIf="product.stock <= 0">Agotado</span>
                </button>
                <button [routerLink]="['/products', product.id]"
                    class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg transition-all duration-300 hover:shadow-lg">
                    Ver
                </button>
            </div>
        </div>
    </div>
</div>